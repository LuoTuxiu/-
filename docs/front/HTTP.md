# HTTP

## 关于状态码

![](https://user-gold-cdn.xitu.io/2018/7/31/164ed742fc418f41?w=829&h=374&f=png&s=91860)

## http 缓存

http 缓存分两种：

1. 强缓存（本地缓存）
2. 协商缓存

两者最大的区别，是强缓存不发送服务器请求，而协商缓存需要发送服务器缓存。而且，强缓存的优先级和发生的时间比协商缓存高和早。

### 强缓存

强缓存主要有两个相关的请求头，Cache-Control、expires

1. Cache-Control

Cache-Control 主要有以下的值

| 值       | 解释                                             |
| -------- | ------------------------------------------------ |
| no-cache | 禁用强缓存，但是如果有协商缓存，可以使用协商缓存 |
| no-store | 所有缓存都禁止                                   |
| max-age  | 例如：max-age=100，含义是 100s                   |

2. expires

解释为过期时间，浏览器会查看这个请求的 expires 字段，和浏览器本地的时间进行对比，如果已经过了这个过期时间，则向服务器发请求请求新的数据。如果没有，则使用本地缓存。但要注意：**expire 记录的是服务器的时间**，因此存在如果用户修改了客户端的时间，则这个时间则可能导致缓存失效

3. Cache-Control 和 expires 的优先级

Cache-Control > expires

### 协商缓存

跟协商缓存相关的请求头有 last-Modified、Etag。所谓的协商缓存的意思是会向服务器发送一次请求，来判断是否需要取本地缓存。

1. last-Modified

服务器最后更改时间。这个值会在服务器端将资源返回给客户端时附在 response 的 headers 里面，客户端会自动标记该信息，并会在下次需要做协商缓存时带上该信息，如果该时间和服务器此时的最新文件更新时间一致，则返回 304 Not Modified。存在一个问题，如果服务器该资源内容无变化，仅被修改了时间，则此时 last-Modified 的判断会导致缓存失效

2. Etag

服务器文件的 Md5 的 hash 值。

3. last-Modified 和 Etag 优先级

last-Modified > Etag

## Http2.0 和 1.0、1.1 的区别

### http2.0 特性

1. 多路复用。

一个 http 连接可以发送多个请求，同时响应可以同时返回

2. 压缩头部

### http1.1 特性

1. keep-alive

保持一个连接的持久性

2. pipeline 管道

一个 http 连接可以发送多个请求，但是响应只能一个一个接收
